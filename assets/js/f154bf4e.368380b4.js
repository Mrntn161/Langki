"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[622],{9451:(e,n,r)=>{r.r(n),r.d(n,{default:()=>c});var o=r(6540),a=r(9246),i=r(3986),s=r(4848);const t=({planId:e,currency:n,onPaymentSuccess:r,onPaymentError:a})=>{const[{options:t,isPending:c,isRejected:l,isResolved:d},p]=(0,i.Gi)();return(0,o.useEffect)(()=>{},[n,p,t]),c?(0,s.jsx)("div",{className:"paypal-loading",children:"Loading PayPal buttons..."}):l?(0,s.jsx)("div",{className:"paypal-error",children:"Error loading PayPal script. Please try refreshing."}):d&&!window.paypal?(0,s.jsx)("div",{className:"paypal-loading",children:"Initializing PayPal..."}):(0,s.jsx)(i.JV,{style:{shape:"pill",color:"gold",layout:"vertical",label:"subscribe"},createSubscription:(n,r)=>r.subscription.create({plan_id:e}),onApprove:(e,n)=>(console.log("Subscription approved:",e.subscriptionID),r(e.subscriptionID),Promise.resolve()),onError:e=>{console.error("PayPal Button Error:",e),a(e)},onCancel:e=>{console.log("Subscription cancelled:",e)}})};const c=function(){const[e,n]=(0,o.useState)("initial"),[r,c]=(0,o.useState)(""),[l,d]=(0,o.useState)(""),p=(0,o.useRef)(null),u={"client-id":"AZ5k7_R-514fcE51ujxXcZrx0rChadyV_-jhodQVUd_mOK_7T1iMHHrXh9Kf23gNwVLt-BputJ5WfpS8",components:"buttons",intent:"subscription",vault:!0},h=e=>{n("processing"),fetch("https://payment-10213.deno.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscriptionID:e})}).then(e=>{if(!e.ok)throw new Error(`Server response was not OK: ${e.status}`);return e.json()}).then(e=>{if(console.log("Server response:",e),!(e&&e.response&&e.response.api&&e.response.expireDate))throw new Error("Invalid responseData structure from server.");c(e.response.api[0]),d(e.response.expireDate),n("success")}).catch(e=>{console.error("Error sending subscriptionID or processing response:",e),n("error"),alert(`An error occurred while processing the transaction: ${e.message}. Please contact support.`)})},m=e=>{console.error("Payment Error:",e),n("error"),alert("An error occurred with the payment. Please try again or contact support.")},x=()=>{if(p.current){p.current.select(),p.current.setSelectionRange(0,99999);try{navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(p.current.value).then(()=>alert("API key copied to clipboard!")).catch(e=>{console.warn("navigator.clipboard.writeText failed, falling back to execCommand.",e),document.execCommand("copy"),alert("API key copied to clipboard (using fallback)!")}):(document.execCommand("copy"),alert("API key copied to clipboard!"))}catch(e){alert("Failed to copy API key. Please copy it manually."),console.error("Failed to copy API key: ",e)}}};return"success"===e?(0,s.jsxs)(a.A,{title:"Subscription Successful",description:"Thank you for subscribing to Langki.",children:[(0,s.jsx)("main",{className:"subscription-page-wrapper",children:(0,s.jsxs)("div",{className:"thank-you-message-container",children:[(0,s.jsx)("h2",{children:"Thank You!"}),(0,s.jsxs)("p",{children:["Thank you for subscribing and funding the ",(0,s.jsx)("strong",{children:"Langki"})," project."]}),(0,s.jsx)("p",{children:"Here is your API key:"}),(0,s.jsxs)("div",{className:"api-key-container",children:[(0,s.jsx)("input",{ref:p,id:"apiKeyDisplay",type:"text",value:r,readOnly:!0}),(0,s.jsx)("button",{onClick:x,className:"copy-button",children:"Copy"})]}),(0,s.jsxs)("p",{children:["Your subscription is active. The next billing time is ",(0,s.jsx)("strong",{children:new Date(l).toLocaleDateString()}),"."]})]})}),(0,s.jsx)("style",{jsx:!0,children:"\n          /* ... CSS cho trang success kh\xf4ng \u0111\u1ed5i ... */\n          .subscription-page-wrapper {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            min-height: calc(80vh - var(--ifm-navbar-height)); /* Adjust as needed */\n            padding: 20px;\n          }\n          .thank-you-message-container {\n            font-family: Arial, sans-serif;\n            max-width: 500px;\n            width: 100%;\n            padding: 30px;\n            border: 1px solid #ccc;\n            border-radius: 10px;\n            background-color: #f9f9f9;\n            text-align: center;\n            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);\n            background-color: var(--ifm-card-background-color, var(--ifm-background-surface-color));\n            border-radius: 8px;\n            padding: 1rem;\n            margin: 2rem 1rem;\n            border: 1px solid var(--ifm-color-emphasis-300);\n            border-radius: var(--ifm-card-border-radius, 8px);\n            background-color: var(--ifm-card-background-color, var(--ifm-background-surface-color));\n            box-shadow: var(--ifm-global-shadow-lw);\n          }\n          .thank-you-message-container h2 { color: var(--ifm-font-color-secondary); margin-bottom: 20px; }\n          .thank-you-message-container p { font-size: 16px; color: var(--ifm-font-color-secondary); line-height: 1.6; margin-bottom: 15px; }\n          .api-key-container { display: flex; align-items: center; margin: 20px 0; }\n          .api-key-container input { flex: 1; padding: 10px; font-size: 14px; border: 1px solid #ccc; border-radius: 5px; margin-right: 10px; }\n          .copy-button { padding: 10px 15px; font-size: 14px; background-color: #007BFF; border: none; border-radius: 5px; cursor: pointer; transition: background-color 0.2s; }\n          .copy-button:hover { background-color: #0056b3; }\n        "})]}):"error"===e?(0,s.jsxs)(a.A,{title:"Subscription Error",description:"There was an error with your subscription.",children:[(0,s.jsx)("main",{className:"subscription-page-wrapper",children:(0,s.jsxs)("div",{className:"container",style:{textAlign:"center",backgroundColor:"#fff",padding:"30px",borderRadius:"8px",boxShadow:"0 0 10px rgba(0,0,0,0.1)"},children:[(0,s.jsx)("h1",{children:"Subscription Error"}),(0,s.jsx)("p",{children:"We encountered an error processing your subscription. Please try again later or contact support if the issue persists."}),(0,s.jsx)("button",{onClick:()=>n("initial"),style:{padding:"10px 20px",backgroundColor:"#5a67d8",color:"var(--ifm-font-color-secondary)",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Try Again"})]})}),(0,s.jsx)("style",{jsx:!0,children:"\n          .subscription-page-wrapper { /* ... nh\u01b0 tr\xean ... */ }\n        "})]}):(0,s.jsxs)(a.A,{title:"Langki Subscription",description:"Choose your Langki subscription plan.",children:[(0,s.jsx)(i.ag,{options:u,children:(0,s.jsx)("main",{className:"subscription-page-wrapper",children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("div",{className:"important-notice",children:(0,s.jsx)("p",{children:"Langki is free for everyone; you don't even need to sign up to use it. No feature is hidden behind a paywall. However, it takes money and time to maintain the server and fulfill each request. Even just a few cents per user each day can accumulate into hundreds of dollars by the end of the month as the user base grows. Therefore, we set a daily usage quota to ensure fair access for all. Langki relies on the support of subscribers to stay up and running. If you're a heavy user or believe in the potential of the project, please consider subscribing. With just a cup of coffee a month, you help fund the project to keep it going. In return, you'll gain unlimited access, a more reliable server, and priority technical support."})}),"processing"===e&&(0,s.jsx)("div",{style:{margin:"20px",padding:"20px",backgroundColor:"#eef",borderRadius:"5px",border:"1px solid #ccf"},children:(0,s.jsx)("p",{style:{textAlign:"center",fontWeight:"bold"},children:"Processing your payment, please wait..."})}),(0,s.jsxs)("div",{className:"subscription-options",style:{display:"processing"===e?"none":"flex"},children:[(0,s.jsxs)("div",{className:"plan-card",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Langki - One Month Unlimited Usage"}),(0,s.jsxs)("div",{className:"price",children:["$5.99 ",(0,s.jsx)("span",{children:"/ month"})]}),(0,s.jsxs)("ul",{className:"features",children:[(0,s.jsx)("li",{children:"Unlimited text-to-speech"}),(0,s.jsx)("li",{children:"Unlimited speech-to-text"}),(0,s.jsx)("li",{children:"Unlimited speech analysis"}),(0,s.jsx)("li",{children:"Unlimited AI messages"}),(0,s.jsx)("li",{children:"Unlimited flashcard generation"})]})]}),(0,s.jsx)("div",{className:"paypal-button-container",children:(0,s.jsx)(t,{planId:"P-8A509116M2090811GNBB3SBI",currency:"USD",onPaymentSuccess:h,onPaymentError:m})})]}),(0,s.jsxs)("div",{className:"plan-card",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Langki - One Year Unlimited Usage"}),(0,s.jsxs)("div",{className:"price",children:["$4.00 ",(0,s.jsx)("span",{children:"/ Month"})]}),(0,s.jsx)("p",{className:"savings-note",children:"Billed annually at $48.00"}),(0,s.jsxs)("ul",{className:"features",children:[(0,s.jsx)("li",{children:"Unlimited text-to-speech"}),(0,s.jsx)("li",{children:"Unlimited speech-to-text"}),(0,s.jsx)("li",{children:"Unlimited speech analysis"}),(0,s.jsx)("li",{children:"Unlimited AI messages"}),(0,s.jsx)("li",{children:"Unlimited flashcard generation"})]})]}),(0,s.jsx)("div",{className:"paypal-button-container",children:(0,s.jsx)(t,{planId:"P-9SN68665ED631023HNBB3SNY",currency:"USD",onPaymentSuccess:h,onPaymentError:m})})]})]})]})})}),(0,s.jsx)("style",{jsx:!0,children:"\n        /* ... CSS g\u1ed1c kh\xf4ng \u0111\u1ed5i (nh\u01b0 trong c\xe2u tr\u1ea3 l\u1eddi tr\u01b0\u1edbc) ... */\n        .subscription-page-wrapper {\n          font-family: sans-serif;\n          line-height: 1.6;\n          color: var(--ifm-font-color-secondary);;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          min-height: calc(85vh - var(--ifm-navbar-height));\n          padding: 20px;\n        }\n        .container h1 { color: var(--ifm-font-color-secondary); margin-bottom: 30px; }\n        .subscription-options { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }\n        .plan-card { \n          background-color: #ffffff; \n          border: 1px solid #ddd; \n          border-radius: 8px; padding: \n          20px; width: 300px; \n          text-align: left; \n          box-shadow: 0 2px 5px rgba(0,0,0,0.05); \n          transition: transform 0.3s ease-in-out, \n          box-shadow 0.3s ease-in-out; \n          display: flex; \n          flex-direction: column; \n          justify-content: space-between; \n          border: 1px solid var(--ifm-color-emphasis-300);\n          border-radius: var(--ifm-card-border-radius, 8px);\n          background-color: var(--ifm-card-background-color, var(--ifm-background-surface-color));\n          box-shadow: var(--ifm-global-shadow-lw);\n        }\n        .plan-card:hover { transform: translateY(-5px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); \n        }\n        .plan-card h2 { \n          color: var(--ifm-font-color-secondary);\n          margin-top: 0; \n          margin-bottom: 10px; \n          font-size: 1.4em; \n          color: var(--ifm-link-color);\n          text-decoration: var(--ifm-link-decoration);\n        }\n        .plan-card .price { font-size: 2em; color: var(--ifm-font-color-secondary); margin-bottom: 5px; }\n        .plan-card .price span { font-size: 0.5em; color: var(--ifm-font-color-secondary);; }\n        .plan-card .savings-note { font-size: 0.9em; color: var(--ifm-font-color-secondary); font-weight: bold; margin-bottom: 15px; }\n        .plan-card .features { list-style: none; padding: 0; margin: 15px 0; flex-grow: 1; }\n        .plan-card .features li { margin-bottom: 8px; padding-left: 20px; position: relative; }\n        .plan-card .features li::before { content: '\u2713'; color: var(--ifm-font-color-secondary); position: absolute; left: 0; font-weight: bold; font-size: 1.1em; }\n        .paypal-button-container { margin-top: 15px; text-align: center; width: 100%; min-height: 50px; /* Cho loading state */ }\n        .paypal-button-container .paypal-loading, .paypal-button-container .paypal-error { font-size: 0.9em; color: var(--ifm-font-color-secondary); padding: 10px; }\n        @media (max-width: 768px) {\n          .subscription-options { flex-direction: column; align-items: center; }\n          .plan-card { width: 90%; max-width: 350px; }\n        }\n        @media (max-width: 380px) {\n            .plan-card { width: 95%; padding: 15px; }\n            .plan-card h2 { font-size: 1.2em; }\n            .plan-card .price { font-size: 1.8em; }\n        }\n        .important-notice {\n          background-color: var(--ifm-card-background-color, var(--ifm-background-surface-color));\n          border-radius: 8px;\n          padding: 1rem;\n          margin: 2rem 1rem;\n          border: 1px solid var(--ifm-color-emphasis-300);\n          border-radius: var(--ifm-card-border-radius, 8px);\n          background-color: var(--ifm-card-background-color, var(--ifm-background-surface-color));\n          box-shadow: var(--ifm-global-shadow-lw);\n        }\n      "})]})}}}]);